var klick_ats_send_command=function(a,t,e,s){s="undefined"==typeof s||s;var i={action:"klick_ats_ajax",subaction:a,nonce:klick_ats_ajax_nonce,data:t};jQuery.post(ajaxurl,i,function(a){if(s)try{var t=JSON.parse(a)}catch(i){return}else var t=a;"undefined"!=typeof e&&e(t)})};jQuery(document).ready(function(a){klick_ats=klick_ats(klick_ats_send_command),ats_clicked=!1,a("#klick_ats_theme_data").change(function(t){a("#ats_create_db").prop("disabled",!1)}),a("#ats_create_db").click(function(a){ats_clicked||(ats_clicked=!0)}),a("#ats_find_my_themes").click(function(t){ats_clicked||(ats_clicked=!0,a("#page_number").val(1))}),a("#ats_next_page").click(function(t){ats_clicked||(ats_clicked=!0,a("#page_number").val(parseInt(a("#page_number").val())+1))}),a("#klick_ats_go_to_last").click(function(t){ats_clicked||(ats_clicked=!0,a("#page_number").val(a("#total_pages").val()))}),a("#ats_prev_page").click(function(t){ats_clicked||(ats_clicked=!0,a("#page_number").val(parseInt(a("#page_number").val())-1))}),a("#klick_ats_go_to_first").click(function(t){ats_clicked||(ats_clicked=!0,a("#page_number").val(1))}),1!=klick_ats_admin.advanced_search_toggle&&a(".klick-ats-advanceform").addClass("disabled")});var klick_ats=function(a){function t(){var a=r(".klick-ats-form-wrapper form").serialize();return a}function e(t,s,n,c){var _="remaining_themes="+s+"&page_count="+n;a("klick_ats_build_theme_table",_,function(a){parseInt(a.status.remaining_themes)>0?(s=parseInt(a.status.remaining_themes),success=a.status.success,success?n++:n++,status=parseInt((c+t-s)/t*100),status=Math.min(100,status),e(t,s,n,c),i(status)):window.location.replace(klick_ats_admin.ats_page_url)})}function s(){r(".downloaded-theme-status").css("display","block"),r(".downloaded-theme-status").find("span").css("display","block"),r(".theme-status-lebel").html("0%"),r(".downloaded-theme-status").find("span").css("width","0%"),r(".downloaded-theme-status").find("span").css("background","#F5821F")}function i(a){var a=a;r(".theme-status-lebel").html(Math.ceil(a)+"%"),r(".downloaded-theme-status").css("height","27px"),r(".downloaded-theme-status").find("span").css("width",a+"%"),r(".downloaded-theme-status").find("span").css("background","#F5821F")}function n(a,t){r(""+a).addClass("klick-notice-message notice notice-error is-dismissible"),r(""+a).html("<p>"+t+"</p>"),r(""+a).slideDown()}function c(a){r(""+a).slideUp()}function _(a){return!/^[0-9]+$/.test(a)}function l(a){return a.length<1}function d(a){return a>100}var r=jQuery;r("#msg_area").hide(),r("#klick_ats_advanced_Save").attr("disabled","disabled"),r(".klick-ats-advance-search-toggle").change(function(){r("#klick_ats_advanced_Save").prop("disabled",!1)}),r("#current-page-selector").keyup(function(){r("#page_number").val(r(this).val())}),r("#klick_ats_nav_tab_wrapper .nav-tab").click(function(a){a.preventDefault();var t=r(this).attr("id");if(t&&"klick_ats_nav_tab_"==t.substring(0,18)){var t=t.substring(18);r("#klick_ats_nav_tab_wrapper .nav-tab:not(#klick_ats_nav_tab_"+t+")").removeClass("nav-tab-active"),r(this).addClass("nav-tab-active"),r(".klick-ats-nav-tab-contents:not(#klick_ats_nav_tab_contents_"+t+")").hide(),r("#klick_ats_nav_tab_contents_"+t).show()}}),r("#klick_ats_advanced_Save").click(function(){var e=t();a("klick_ats_save_settings",e,function(a){r(".klick-save-notice-message").html(a.status.messages),0==a.status.search_toggle?r("#klick_ats_nav_tab_ats-manage").css("display","none"):r("#klick_ats_nav_tab_ats-manage").css("display","block"),r(".fade").delay(2e3).slideUp(200,function(){r("#klick_ats_advanced_Save").prop("disabled","disabled")})})}),r("#ats_create_db").click(function(a){a.preventDefault(),r(this).prop("disabled","disabled");var t=240,n=parseInt(r("#klick_ats_theme_data").val()),c=1;s(),i(t/n*100),e(n,n,c,t)}),r("#theme-filter").submit(function(){var a=r.trim(r("#avg_ratings").val());if(l(a)===!0)r("#avg_ratings").val("0");else{if(_(a)===!0)return n("#msg_area",klick_ats_admin.notice_for_avg_ratings),!1;if(d(a)===!0)return n("#msg_area",klick_ats_admin.notice_for_avg_ratings),!1}var t=r.trim(r("#active_installs").val());if(l(t)===!0)r("#active_installs").val("0");else if(_(t)===!0)return n("#msg_area",klick_ats_admin.notice_for_active_installs),!1;var e=r.trim(r("#downloaded").val());if(l(e)===!0)r("#downloaded").val("0");else if(_(e)===!0)return n("#msg_area",klick_ats_admin.notice_for_downloaded),!1;return!0}),r(".ats-form").change(function(a){c("#msg_area"),r("#ats_find_my_themes").attr("disabled",!1)}),r(".klick-ats-install").click(function(t){t.preventDefault();var e=r(this).attr("data-id");r(this).text("Installing...");var s="install_this_theme="+r(this).attr("data-id");a("klick_ats_install_theme",s,function(a){return 1==a.status?(n("#msg_area",klick_ats_admin.notice_for_success_install),r('[data-id="'+e+'"]').text("Installed"),r('[data-id="'+e+'"]').attr("disabled","disabled"),!1):(console.log(klick_ats_admin.notice_for_fail_install),n("#msg_area",klick_ats_admin.notice_for_fail_install),!1)})})};